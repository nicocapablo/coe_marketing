// =======================
// PREGUNTAS (RELLENA T√ö)
// =======================

// --- SENTENCIAS (V / F) ---
const preguntasSentencias = [
  {
    texto: "El client decideix si un intercanvi √©s just comparant el que obt√© amb el que dona a canvi.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting nom√©s actua quan el client t√© una necessitat real.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "El m√†rqueting pot estimular desitjos aprofitant tend√®ncies de conducta humanes com la sup√®rbia o l‚Äôenveja.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "La compra compulsiva sempre respon a una necessitat real del consumidor.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "Una persona pot consumir un producte sense haver-lo comprat ella mateixa.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting empresarial t√© com a objectiu principal el benefici econ√≤mic.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting social busca principalment augmentar les vendes d‚Äôuna empresa.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "El m√†rqueting pol√≠tic utilitza t√®cniques similars a les del m√†rqueting empresarial.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting estrat√®gic se centra en accions a curt termini.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "El m√†rqueting operatiu executa les accions definides pel m√†rqueting estrat√®gic.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "La distribuci√≥ determina com arriba el producte al client final.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "La comunicaci√≥ inclou eines com la publicitat, les promocions i les relacions p√∫bliques.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El benchmarking consisteix a copiar exactament les pr√†ctiques dels competidors.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "El benchmarking extern analitza empreses l√≠ders o competidores del sector.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting digital no presenta riscos √®tics perqu√® √©s m√©s eficient.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "L‚Äô√∫s de dades personals en m√†rqueting digital pot afectar la privacitat dels consumidors.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting √©s nom√©s vendre i fer publicitat.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "El m√†rqueting inclou tot el cicle del producte, des de la idea fins a la fidelitzaci√≥.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "La fidelitzaci√≥ del client √©s tan important com aconseguir noves vendes.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "NH Hotels va detectar que el seu client tipus valorava principalment els luxes innecessaris.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "Eliminar serveis prescindibles pot millorar l‚Äôexperi√®ncia del client.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "Tesla i Volvo poden tenir caracter√≠stiques t√®cniques similars per√≤ percepcions de mercat diferents.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El consumidor, el comprador i el prescriptor sempre s√≥n la mateixa persona.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "La decisi√≥ de compra dep√®n de la percepci√≥ de l‚Äôequilibri entre producte, preu, distribuci√≥ i comunicaci√≥.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El m√†rqueting intern est√† dirigit als clients externs de l‚Äôempresa.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "El m√†rqueting relacional busca relacions a llarg termini amb els clients.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "El neurom√†rqueting estudia com reacciona el cervell davant est√≠muls publicitaris.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "L‚Äôan√†lisi DAFO permet identificar fortaleses, debilitats, oportunitats i amenaces.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  },
  {
    texto: "Els objectius del m√†rqueting estrat√®gic han de ser r√≠gids i immutables.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "f"
  },
  {
    texto: "L‚Äôobjectiu final de l‚Äôempresa √©s maximitzar el benefici, no nom√©s el volum de vendes.",
    opciones: ["v) Verdadero", "f) Falso"],
    correcta: "v"
  }
];


// --- MINITEST (3 OPCIONES) ---

const preguntasMinitest = [
  {
    texto: "Una empresa llan√ßa un anunci on gaireb√© no es mostra el producte, per√≤ s‚Äôinsisteix en emocions com el glamour, l‚Äô√®xit i el reconeixement social. Quin √©s l‚Äôobjectiu principal de l‚Äôanunci?",
    opciones: [
      "a) Informar detalladament sobre les caracter√≠stiques del producte",
      "b) Persuadir i refor√ßar la imatge de marca",
      "c) Reduir el preu percebut del producte"
    ],
    correcta: "b"
  },
  {
    texto: "Una marca analitza si el seu anunci reflecteix de manera coherent la missi√≥, visi√≥ i valors corporatius. Qu√® est√† avaluant principalment?",
    opciones: [
      "a) L‚Äôefic√†cia del canal de distribuci√≥",
      "b) L‚Äôalineaci√≥ estrat√®gica del missatge publicitari",
      "c) El tipus de compra del consumidor"
    ],
    correcta: "b"
  },
  {
    texto: "En un anunci de llenceria de luxe, les models s√≥n famoses i representen sensualitat i √®xit. Quin paper exerceixen principalment?",
    opciones: [
      "a) El consumidor final",
      "b) L‚Äôempresa fabricant",
      "c) Les models i celebrities"
    ],
    correcta: "c"
  },
  {
    texto: "Un producte s‚Äôadre√ßa a dones urbanes, de 25 a 45 anys, amb alt poder adquisitiu. Quin concepte s‚Äôest√† definint?",
    opciones: [
      "a) El mercat total",
      "b) El target",
      "c) El mercat real"
    ],
    correcta: "b"
  },
  {
    texto: "Un anunci apel¬∑la a l‚Äôautoestima, a l‚Äô√®xit personal i al reconeixement social. En quin nivell de la pir√†mide de Maslow se situa principalment?",
    opciones: [
      "a) Necessitats fisiol√≤giques",
      "b) Necessitats de seguretat",
      "c) Necessitats de reconeixement"
    ],
    correcta: "c"
  },
  {
    texto: "Una empresa ven un producte car, amb una forta imatge de marca i una compra poc freq√ºent. Quin tipus de compra √©s m√©s probable?",
    opciones: [
      "a) Compra impulsiva",
      "b) Compra complexa o de selecci√≥",
      "c) Compra d‚Äôemerg√®ncia"
    ],
    correcta: "b"
  },
  {
    texto: "Un producte presenta baixos creixements del mercat i una forta compet√®ncia, per√≤ una marca consolidada. En quina fase del cicle de vida es troba?",
    opciones: [
      "a) Introducci√≥",
      "b) Creixement",
      "c) Maduresa"
    ],
    correcta: "c"
  },
  {
    texto: "Una empresa compara la seva estrat√®gia publicit√†ria amb la de les empreses l√≠ders del sector per millorar-la. Quina eina est√† utilitzant?",
    opciones: [
      "a) DAFO",
      "b) Benchmarking",
      "c) Segmentaci√≥ de mercat"
    ],
    correcta: "b"
  },
  {
    texto: "Un anunci no busca vendre immediatament, sin√≥ refor√ßar el record de marca. Quina funci√≥ de la comunicaci√≥ compleix?",
    opciones: [
      "a) Informar",
      "b) Persuadir",
      "c) Recordar"
    ],
    correcta: "c"
  },
  {
    texto: "Una marca de cotxes comunica seguretat, confort i exclusivitat en els seus anuncis. Quin tipus d‚Äôatributs destaca principalment?",
    opciones: [
      "a) Atributs b√†sics",
      "b) Atributs funcionals",
      "c) Atributs psicol√≤gics"
    ],
    correcta: "c"
  },
  {
    texto: "Una empresa ven directament al consumidor a trav√©s de la seva web, sense intermediaris. Quin tipus de canal utilitza?",
    opciones: [
      "a) Canal indirecte llarg",
      "b) Canal indirecte curt",
      "c) Canal directe"
    ],
    correcta: "c"
  },
  {
    texto: "Una empresa elimina serveis poc valorats per millorar l‚Äôexperi√®ncia del client i reduir costos. Qu√® est√† optimitzant?",
    opciones: [
      "a) La funcionalitat del producte",
      "b) El m√†rqueting operatiu",
      "c) El posicionament estrat√®gic"
    ],
    correcta: "a"
  },
  {
    texto: "Un anunci se centra a crear desig encara que el consumidor no tingui una necessitat real. Qu√® fa el m√†rqueting en aquest cas?",
    opciones: [
      "a) Satisfer necessitats b√†siques",
      "b) Estimular desitjos",
      "c) Reduir l‚Äôesfor√ß econ√≤mic"
    ],
    correcta: "b"
  },
  {
    texto: "Una marca apareix a la part alta d‚Äôun mapa de posicionament en preu i prestigi. Quina estrat√®gia segueix?",
    opciones: [
      "a) Lideratge en costos",
      "b) Diferenciaci√≥",
      "c) Especialitzaci√≥ en baix preu"
    ],
    correcta: "b"
  },
  {
    texto: "Una empresa ven un producte conegut, amb poca innovaci√≥ recent i molta compet√®ncia. A la matriu de Boston, quin tipus de producte pot ser?",
    opciones: [
      "a) Estrella",
      "b) Interrogant",
      "c) Vaca"
    ],
    correcta: "c"
  },
  {
    texto: "Un anunci mostra emocions, m√∫sica suggeridora i una est√®tica molt cuidada, per√≤ poques dades t√®cniques. Quin tipus de llenguatge utilitza?",
    opciones: [
      "a) Informatiu racional",
      "b) Emocional",
      "c) T√®cnic-industrial"
    ],
    correcta: "b"
  },
  {
    texto: "Una marca utilitza famosos per refor√ßar la seva credibilitat i car√†cter aspiracional. Quin rol compleixen?",
    opciones: [
      "a) Compradors",
      "b) Consumidors",
      "c) Prescriptors"
    ],
    correcta: "c"
  },
  {
    texto: "Una empresa fixa el preu tenint en compte els costos, la compet√®ncia i el valor percebut. Quin element del m√†rqueting mix est√† treballant?",
    opciones: [
      "a) Producte",
      "b) Preu",
      "c) Distribuci√≥"
    ],
    correcta: "b"
  },
  {
    texto: "Un anunci de cotxes s‚Äôadre√ßa a homes i dones urbans, de 30 a 60 anys, amb ingressos mitjans-alts. Qu√® est√† definint?",
    opciones: [
      "a) Mercat potencial",
      "b) Target",
      "c) Mercat real"
    ],
    correcta: "b"
  },
  {
    texto: "Una empresa analitza on ven m√©s i decideix refor√ßar nom√©s els canals rendibles. Quina pol√≠tica est√† ajustant?",
    opciones: [
      "a) Comunicaci√≥",
      "b) Distribuci√≥",
      "c) Producte"
    ],
    correcta: "b"
  },
  {
    texto: "Una campanya busca canviar la percepci√≥ que tenen els clients sobre una marca ja coneguda. Quin √©s el seu objectiu?",
    opciones: [
      "a) Introduir un producte nou",
      "b) Reposicionar la marca",
      "c) Reduir costos"
    ],
    correcta: "b"
  },
  {
    texto: "Un producte ofereix beneficis f√≠sics, funcionals i emocionals. De quin tipus de producte es tracta?",
    opciones: [
      "a) Producte b√†sic",
      "b) Producte real",
      "c) Producte ampliat"
    ],
    correcta: "b"
  },
  {
    texto: "Una empresa utilitza anuncis de gran format i esdeveniments exclusius per crear prestigi. Quina avantatge competitiva busca?",
    opciones: [
      "a) Preu baix",
      "b) Diferenciaci√≥",
      "c) Rapidesa de distribuci√≥"
    ],
    correcta: "b"
  },
  {
    texto: "Un anunci gaireb√© no mostra el producte per√≤ fa que la marca sigui clarament recordada. Qu√® ha aconseguit principalment?",
    opciones: [
      "a) Informar sobre el producte",
      "b) Recordar la marca",
      "c) Reduir l‚Äôesfor√ß econ√≤mic"
    ],
    correcta: "b"
  },
  {
    texto: "Una empresa detecta que els seus clients valoren m√©s la funcionalitat que el luxe. Quina decisi√≥ hauria de prendre?",
    opciones: [
      "a) Afegir m√©s elements de glamour",
      "b) Optimitzar la funcionalitat del producte",
      "c) Augmentar el preu"
    ],
    correcta: "b"
  },
  {
    texto: "Una marca ven productes cars, de compra poc freq√ºent i amb una forta implicaci√≥ emocional. Quin tipus de b√©ns s√≥n?",
    opciones: [
      "a) B√©ns de conveni√®ncia",
      "b) B√©ns d‚Äôespecialitat",
      "c) B√©ns no buscats"
    ],
    correcta: "b"
  },
  {
    texto: "Una empresa defineix accions a curt termini per assolir els objectius marcats. Quin tipus de m√†rqueting aplica?",
    opciones: [
      "a) M√†rqueting estrat√®gic",
      "b) M√†rqueting operatiu",
      "c) M√†rqueting relacional"
    ],
    correcta: "b"
  },
  {
    texto: "Una marca utilitza les xarxes socials per comunicar-se de manera directa i constant amb els seus clients. Quin avantatge principal obt√©?",
    opciones: [
      "a) Comunicaci√≥ personalitzada i cont√≠nua",
      "b) Eliminaci√≥ total de la compet√®ncia",
      "c) Reducci√≥ del cicle de vida del producte"
    ],
    correcta: "a"
  },
  {
    texto: "Una empresa decideix no competir en preu, sin√≥ en imatge, prestigi i experi√®ncia. Quina estrat√®gia segueix?",
    opciones: [
      "a) Lideratge en costos",
      "b) Diferenciaci√≥",
      "c) Especialitzaci√≥ geogr√†fica"
    ],
    correcta: "b"
  },
  {
    texto: "Un anunci aconsegueix emocionar i conv√®ncer, per√≤ no explicar detalls t√®cnics. Quina funci√≥ compleix millor?",
    opciones: [
      "a) Informar",
      "b) Persuadir",
      "c) Educar"
    ],
    correcta: "b"
  }
];


// --- FRASES DE √ÅNIMO ---
const frases_animo = [
  "¬°Muy bien!",
  "¬°Correcto!",
  "¬°Buen trabajo!",
  "¬°As√≠ se hace!",
  "¬°Perfecto!"
];

// =======================
// VARIABLES
// =======================

let modo = "";
let preguntasParaEsteTest = [];
let i = 0;
let puntuacion = 0;

// =======================
// FUNCIONES
// =======================

function barajar(array) {
  let currentIndex = array.length, randomIndex;
  while (currentIndex !== 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    [array[currentIndex], array[randomIndex]] =
      [array[randomIndex], array[currentIndex]];
  }
}

function mostrarMensaje(texto, tipo) {
  const chat = document.getElementById("chat");
  const msg = document.createElement("div");
  msg.classList.add("message", tipo);
  msg.innerHTML = texto.replace(/\n/g, "<br>");
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}

function mostrarMenuInicial() {
  mostrarMensaje(
    "üëã Hola, bienvenido al Tema 1.\n\n¬øQu√© quieres practicar?",
    "bot"
  );
  mostrarMensaje(
    "A) Sentencias (Verdadero / Falso)\nB) Mini-test (3 opciones)",
    "bot"
  );

  configurarBoton("btnA", "Sentencias", iniciarSentencias);
  configurarBoton("btnB", "Mini-test", iniciarMinitest);
  ocultarBotones(["btnC", "btnD"]);
}

function iniciarSentencias() {
  modo = "sentencias";
  i = 0;
  puntuacion = 0;

  barajar(preguntasSentencias);
  preguntasParaEsteTest = preguntasSentencias.slice(0, 30);

  configurarBoton("btnA", "V", () => responder("v"));
  configurarBoton("btnB", "F", () => responder("f"));
  ocultarBotones(["btnC", "btnD"]);

  mostrarPregunta();
}

function iniciarMinitest() {
  modo = "minitest";
  i = 0;
  puntuacion = 0;

  barajar(preguntasMinitest);
  preguntasParaEsteTest = preguntasMinitest.slice(0, 20);

  configurarBoton("btnA", "A", () => responder("a"));
  configurarBoton("btnB", "B", () => responder("b"));
  configurarBoton("btnC", "C", () => responder("c"));
  ocultarBotones(["btnD"]);

  mostrarPregunta();
}

function mostrarPregunta() {
  if (!preguntasParaEsteTest[i]) return;

  const p = preguntasParaEsteTest[i];
  const texto = `${p.texto}\n\n${p.opciones.join("\n")}`;
  mostrarMensaje(texto, "bot");
}

function responder(opcion) {
  const p = preguntasParaEsteTest[i];
  mostrarMensaje(opcion.toUpperCase(), "user");

  if (opcion === p.correcta) {
    puntuacion++;
    mostrarMensaje(
      frases_animo[Math.floor(Math.random() * frases_animo.length)],
      "bot"
    );
  } else {
    mostrarMensaje(
      `‚ùå Incorrecto. La correcta era ${p.correcta.toUpperCase()}`,
      "bot"
    );
  }

  i++;

  if (i < preguntasParaEsteTest.length) {
    setTimeout(mostrarPregunta, 600);
  } else {
    setTimeout(() => {
      mostrarMensaje(
        `üèÅ Resultado final: ${puntuacion} / ${preguntasParaEsteTest.length}`,
        "bot"
      );
      desactivarBotones();
    }, 600);
  }
}

function configurarBoton(id, texto, accion) {
  const btn = document.getElementById(id);
  btn.style.display = "block";
  btn.textContent = texto;
  btn.onclick = accion;
}

function ocultarBotones(ids) {
  ids.forEach(id => {
    document.getElementById(id).style.display = "none";
  });
}

function desactivarBotones() {
  document.querySelectorAll("button").forEach(b => b.disabled = true);
}

// =======================
// ARRANQUE
// =======================

document.addEventListener("DOMContentLoaded", mostrarMenuInicial);


